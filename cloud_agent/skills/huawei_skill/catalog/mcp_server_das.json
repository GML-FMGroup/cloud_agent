{
  "server": "mcp_server_das",
  "mode": "openapi",
  "module": "huaweicloud_services_server.mcp_server_das.src.mcp_server_das.run",
  "serviceCode": "das",
  "openapiFile": "mcp-server/huaweicloud_services_server/mcp_server_das/src/mcp_server_das/config/das.json",
  "toolCount": 61,
  "tools": [
    {
      "name": "ShowApiVersion",
      "description": "查询指定的API版本信息",
      "inputSchema": {
        "type": "object",
        "properties": {
          "version": {
            "description": "API版本",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "version"
        ]
      }
    },
    {
      "name": "ChangeChargeMode",
      "description": "设置付费实例",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "instance_id_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "5c59fa7d6f09456b947f32922f9aeda1in01"
            ],
            "description": "实例ID列表"
          },
          "datastore_type": {
            "type": "string",
            "example": "mysql",
            "description": "引擎类型"
          }
        },
        "required": [
          "datastore_type",
          "instance_id_list",
          "project_id"
        ]
      }
    },
    {
      "name": "ListFullSqlTasks",
      "description": "全量SQL开关打开后,查询SQL洞察任务列表。该功能仅支持付费实例。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数。最大为100。",
            "type": "integer",
            "format": "int32",
            "default": 20,
            "maximum": 100,
            "minimum": 1,
            "in": "query"
          },
          "page": {
            "description": "页码。",
            "type": "integer",
            "format": "int32",
            "default": 1,
            "minimum": 1,
            "in": "query"
          },
          "asc": {
            "description": "排序顺序(true:正序, false:逆序)。",
            "type": "boolean",
            "default": false,
            "in": "query"
          },
          "sort_field": {
            "description": "排序字段(create_at:任务创建时间, range_start_at,range_end_at:任务起止时间)。",
            "type": "string",
            "default": "create_at",
            "in": "query"
          },
          "sql_template_id": {
            "description": "SQL模板ID。",
            "type": "string",
            "in": "query"
          },
          "status": {
            "description": "执行状态(0:成功,1:失败)。",
            "type": "string",
            "in": "query"
          },
          "trx_id": {
            "description": "事务ID。",
            "type": "string",
            "in": "query"
          },
          "thread_id": {
            "description": "线程ID。",
            "type": "string",
            "in": "query"
          },
          "operation": {
            "description": "操作类型。",
            "type": "string",
            "in": "query"
          },
          "db_name": {
            "description": "数据库名。",
            "type": "string",
            "in": "query"
          },
          "keyword": {
            "description": "关键字。",
            "type": "string",
            "in": "query"
          },
          "user": {
            "description": "用户名。",
            "type": "string",
            "in": "query"
          },
          "create_at_right": {
            "description": "最大任务创建时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "create_at_left": {
            "description": "最小任务创建时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "range_right": {
            "description": "最大任务起止时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "range_left": {
            "description": "最小任务起止时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ShowSqlSwitchStatus",
      "description": "查询DAS收集全量SQL和慢SQL的开关状态。该功能仅支持付费实例。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型。当前全量SQL支持的数据库类型包括MySQL和GaussDB(for MySQL),慢SQL支持的类型:MySQL、GaussDB(for MySQL)、PostgreSQL。",
            "type": "string",
            "in": "query"
          },
          "type": {
            "description": "开关类型。取值DAS SQL Explorer和DAS Slow Query Log,分别表示DAS收集全量SQL开关和DAS收集慢SQL开关。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "type"
        ]
      }
    },
    {
      "name": "DeleteSqlLimitRules",
      "description": "删除SQL限流规则。目前仅支持MySQL和PostgreSQL数据库",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型",
            "enum": [
              "MySQL",
              "PostgreSQL"
            ]
          },
          "sql_limit_rule_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "SQL限流规则ID"
          },
          "database_name": {
            "type": "string",
            "description": "数据库名(PostgreSQL必填)"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "sql_limit_rule_ids"
        ]
      }
    },
    {
      "name": "ShowTuning",
      "description": "获取诊断结果",
      "inputSchema": {
        "type": "object",
        "properties": {
          "connection_id": {
            "description": "连接Id",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目Id",
            "type": "string",
            "in": "path"
          },
          "message_id": {
            "description": "诊断messageId",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "connection_id",
          "message_id",
          "project_id"
        ]
      }
    },
    {
      "name": "DeleteDbUser",
      "description": "删除注册在DAS里的数据库用户。此接口只是将注册的数据库用户在DAS系统里删除,不会真正删除数据库用户对象。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "path"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "CancelShareConnections",
      "description": "删除共享链接,",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "shared_conn_id": {
            "type": "string",
            "description": "共享链接ID"
          },
          "users": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "user_id": {
                  "type": "string",
                  "description": "用户ID"
                },
                "user_name": {
                  "type": "string",
                  "description": "用户名"
                }
              },
              "required": [
                "user_id",
                "user_name"
              ]
            },
            "description": "用户"
          }
        },
        "required": [
          "project_id",
          "shared_conn_id",
          "users"
        ]
      }
    },
    {
      "name": "CreateSqlLimitRules",
      "description": "添加SQL限流规则。目前仅支持MySQL和PostgreSQL数据库。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型",
            "enum": [
              "MySQL",
              "PostgreSQL"
            ]
          },
          "sql_limit_rules": {
            "type": "array",
            "items": {
              "type": "object",
              "required": [
                "sql_type",
                "max_concurrency",
                "pattern"
              ],
              "properties": {
                "sql_type": {
                  "type": "string",
                  "description": "SQL类型",
                  "enum": [
                    "SELECT",
                    "UPDATE",
                    "DELETE",
                    "INSERT",
                    "QUERY_ID",
                    "QUERY_STR"
                  ]
                },
                "max_concurrency": {
                  "type": "integer",
                  "format": "int32",
                  "description": "最大并发数"
                },
                "max_waiting": {
                  "type": "integer",
                  "format": "int32",
                  "description": "最大等待时间"
                },
                "pattern": {
                  "type": "string",
                  "description": "SQL限流规则。限流规则以~分隔关键字,例如select~a。规则举例详细说明:例如关键字是\"select~a\", 含义为:select以及a为该并发控制所包含的两个关键字,~为关键字间隔符,即若执行SQL命令包含select与a两个关键字视为命中此条并发控制规则。"
                },
                "his_sql_limit_switch": {
                  "type": "boolean",
                  "description": "历史SQL限流开关。"
                }
              }
            },
            "description": "需要创建的SQL限流规则列表,一次最多创建5个"
          },
          "database_name": {
            "type": "string",
            "description": "数据库名(PostgreSQL必填)"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "sql_limit_rules"
        ]
      }
    },
    {
      "name": "ListDbUsers",
      "description": "查询注册在DAS里的数据库用户列表,后续调用其他接口时(如查询实例会话列表接口)需要用到此接口返回的db_user_id。此接口不会返回数据库实例上的数据库用户对象。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "db_username": {
            "description": "数据库用户名称",
            "type": "string",
            "in": "query"
          },
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "query"
          },
          "limit": {
            "description": "查询记录数。默认为100,不能为负数,最小值为1,最大值为100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ShowSqlExecutionPlan",
      "description": "查询SQL执行计划。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "sql": {
            "description": "SQL语句",
            "type": "string",
            "in": "query"
          },
          "database": {
            "description": "数据库名称",
            "type": "string",
            "in": "query"
          },
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "database",
          "db_user_id",
          "instance_id",
          "project_id",
          "sql"
        ]
      }
    },
    {
      "name": "ListSqlLimitRules",
      "description": "查询SQL限流规则。目前仅支持MySQL和PostgreSQL数据库。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "database_name": {
            "description": "数据库名(PostgreSQL必填)",
            "type": "string",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "enum": [
              "MySQL",
              "PostgreSQL"
            ],
            "in": "query"
          },
          "limit": {
            "description": "查询记录数。默认为100,不能为负数,最小值为1,最大值为100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "SetThresholdForMetric",
      "description": "设置指标阈值",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "metric_code": {
            "type": "string",
            "example": "sys001_cpu_usage",
            "description": "指标码"
          },
          "datastore_type": {
            "type": "string",
            "example": "mysql",
            "description": "数据库类型"
          },
          "new_threshold": {
            "type": "number",
            "format": "double",
            "example": 87,
            "description": "新阈值"
          }
        },
        "required": [
          "datastore_type",
          "metric_code",
          "new_threshold",
          "project_id"
        ]
      }
    },
    {
      "name": "ShowQuotas",
      "description": "查询云DBA配额",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "SynchronizeInstances",
      "description": "同步实例列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "engine_type": {
            "type": "string",
            "description": "数据库引擎类型。"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ListCloudDbaInstances",
      "description": "获取DAS云DBA实例列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为20,最大取值200。",
            "type": "integer",
            "format": "int32",
            "maximum": 200,
            "minimum": 0,
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "maximum": 5000,
            "minimum": 0,
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。",
            "type": "string",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateInstanceConnection",
      "description": "创建实例连接",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "engine_type": {
            "type": "string",
            "description": "数据库引擎类型。"
          },
          "network_type": {
            "type": "string",
            "enum": [
              "gaussdb",
              "dds",
              "rds",
              "ecs",
              "gemini",
              "ddm"
            ],
            "description": "网络类型。"
          },
          "username": {
            "type": "string",
            "description": "用户名。"
          },
          "is_save_password": {
            "type": "boolean",
            "description": "是否保存密码。"
          },
          "password": {
            "type": "string",
            "description": "密码。"
          },
          "node_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "节点编号。"
          },
          "remarks": {
            "type": "string",
            "description": "备注。"
          },
          "port": {
            "type": "integer",
            "format": "int32",
            "description": "端口。"
          },
          "database_name": {
            "type": "string",
            "description": "数据库名字。"
          },
          "sql_record_flag": {
            "type": "boolean",
            "description": "sql记录开关。"
          }
        },
        "required": [
          "engine_type",
          "instance_id",
          "is_save_password",
          "network_type",
          "password",
          "project_id",
          "username"
        ]
      }
    },
    {
      "name": "ListProcesses",
      "description": "支持根据数据库、用户查询实例会话列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为20,最大取值100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "node_id": {
            "description": "节点ID",
            "type": "string",
            "in": "query"
          },
          "database": {
            "description": "数据库",
            "type": "string",
            "in": "query"
          },
          "user": {
            "description": "用户",
            "type": "string",
            "in": "query"
          },
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportFullSqlDetails",
      "description": "全量SQL开关打开后,创建SQL洞察任务,支持按节点、用户名、数据库、操作类型等导出全量SQL明细数据。该功能仅支持付费实例。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数。最大为100。",
            "type": "integer",
            "format": "int32",
            "default": 20,
            "maximum": 100,
            "minimum": 1,
            "in": "query"
          },
          "page": {
            "description": "页码。",
            "type": "integer",
            "format": "int32",
            "default": 1,
            "minimum": 1,
            "in": "query"
          },
          "asc": {
            "description": "排序顺序(true:正序, false:逆序)。",
            "type": "boolean",
            "default": false,
            "in": "query"
          },
          "sort_field": {
            "description": "排序字段(execute_at:执行时间, execute_cost:执行耗时, lock_wait_time:锁等待时间, rows_examined:扫描行数, rows_returned:返回行数)。",
            "type": "string",
            "default": "execute_at",
            "in": "query"
          },
          "return_max": {
            "description": "最大返回行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "return_min": {
            "description": "最小返回行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "affect_max": {
            "description": "最大影响行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "affect_min": {
            "description": "最小影响行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "scan_max": {
            "description": "最大扫描行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "scan_min": {
            "description": "最小扫描行数。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "cost_max": {
            "description": "最大执行耗时(毫秒)。",
            "type": "number",
            "format": "double",
            "in": "query"
          },
          "cost_min": {
            "description": "最小执行耗时(毫秒)。",
            "type": "number",
            "format": "double",
            "in": "query"
          },
          "sql_template_ids": {
            "description": "SQL模板ID(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "status_list": {
            "description": "执行状态(0:成功,1:失败,可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "session_id_list": {
            "description": "会话ID(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "trx_id_list": {
            "description": "事务ID(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "thread_id_list": {
            "description": "线程ID(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "client_ip_list": {
            "description": "客户端IP(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "operation_list": {
            "description": "操作类型(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "db_list": {
            "description": "数据库(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "user_list": {
            "description": "用户名(可组合,用空格分隔)。",
            "type": "string",
            "in": "query"
          },
          "fuzzy": {
            "description": "是否模糊匹配。",
            "type": "string",
            "in": "query"
          },
          "keyword": {
            "description": "关键字(可组合,用逗号分隔)。",
            "type": "string",
            "in": "query"
          },
          "node_id": {
            "description": "节点ID。",
            "type": "string",
            "in": "query"
          },
          "task_ids": {
            "description": "SQL洞察任务ID列表,时间范围大于1天的SQL洞察任务后台将拆分为多个任务解析,该场景支持多任务过滤导出。",
            "type": "array",
            "items": {
              "type": "integer",
              "format": "int64"
            },
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ListRiskItems",
      "description": "查询资源风险实例风险项",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "project_id"
        ]
      }
    },
    {
      "name": "ChangeSqlSwitch",
      "description": "打开或者关闭DAS收集全量SQL开关,开启后,实例的性能损耗在5%以内。开启全量SQL后,本服务会对SQL的文本内容进行存储,以便进行分析。用户可自行设置全量SQL的保存时间范围,到期后会自动删除;如果未设置,数据默认保留7天。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "type": {
            "type": "string",
            "description": "开关类型。取值DAS SQL Explorer和DAS Slow Query Log,分别表示DAS收集全量SQL开关和DAS收集慢SQL开关。"
          },
          "status": {
            "type": "integer",
            "description": "开关状态,取值0和1,分别代表要关闭和开启。",
            "format": "int32"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型。当前全量SQL支持的数据库类型包括MySQL和GaussDB(for MySQL),慢SQL支持的类型:MySQL、GaussDB(for MySQL)、PostgreSQL。"
          },
          "retention_days": {
            "type": "integer",
            "description": "SQL数据保存时长(天)。默认为7天,最长可保留30天,到期后数据自动删除。如果要保留30天以上,请到DAS页面进行操作。",
            "format": "int64"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "status",
          "type"
        ]
      }
    },
    {
      "name": "ListInstanceTopSlowLog",
      "description": "查询实例的TOP慢SQL列表",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "end_at": {
            "description": "结束时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "num": {
            "description": "TOP数量",
            "type": "integer",
            "format": "int32",
            "maximum": 30,
            "minimum": 1,
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "end_at",
          "instance_id",
          "num",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ExportTopSqlTrendDetails",
      "description": "TopSQL开关打开后,导出SQL执行耗时区间数据。该功能仅支持付费实例。查询时间间隔最长六小时。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "node_id": {
            "description": "节点ID。",
            "type": "string",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。支持MySQL和GaussDB(for MySQL)。",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ChangeTransactionSwitchStatus",
      "description": "开启/关闭历史事务开关,仅支持MySQL引擎,并且依赖开启全量SQL或者慢SQL功能",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "switch_status": {
            "type": "string",
            "example": "Enabled",
            "description": "开关状态",
            "enum": [
              "Enabled",
              "Disabled"
            ]
          },
          "datastore_type": {
            "type": "string",
            "example": "MySQL",
            "description": "数据库类型。仅支持MySQL",
            "enum": [
              "MySQL"
            ]
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "switch_status"
        ]
      }
    },
    {
      "name": "ShowSqlExplain",
      "description": "查询SQL执行计划。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "db_user_id": {
            "type": "string",
            "description": "数据库用户ID"
          },
          "database": {
            "type": "string",
            "description": "数据库名称"
          },
          "sql": {
            "type": "string",
            "description": "SQL语句"
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateTuning",
      "description": "执行SQL诊断,",
      "inputSchema": {
        "type": "object",
        "properties": {
          "connection_id": {
            "description": "连接ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "database_name": {
            "type": "string",
            "description": "数据库名称"
          },
          "schema_name": {
            "type": "string",
            "description": "schema名称"
          },
          "sql_script": {
            "type": "string",
            "description": "sql脚本"
          },
          "node_type": {
            "type": "string",
            "description": "节点类型"
          },
          "node_id": {
            "type": "string",
            "description": "节点Id"
          }
        },
        "required": [
          "connection_id",
          "database_name",
          "project_id",
          "sql_script"
        ]
      }
    },
    {
      "name": "CreateSpaceAnalysisTask",
      "description": "创建空间分析任务,如触发重新分析,支持MySQL和GaussDB(for MySQL)引擎",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "operate": {
            "type": "string",
            "description": "操作类型",
            "enum": [
              "reanalysis"
            ]
          },
          "datastore_type": {
            "type": "string",
            "description": "引擎类型",
            "enum": [
              "MySQL",
              "GaussDB(for MySQL)"
            ]
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "operate",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportSlowSqlStatistics",
      "description": "慢SQL开关打开后,导出慢SQL统计数据。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型。慢SQL统计支持的类型:DDS-Community。",
            "enum": [
              "DDS-Community"
            ]
          },
          "start_at": {
            "type": "integer",
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "format": "int64"
          },
          "end_at": {
            "type": "integer",
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "format": "int64"
          },
          "node_ids": {
            "type": "array",
            "description": "节点ID列表。",
            "items": {
              "type": "string"
            }
          },
          "statistics_field": {
            "type": "string",
            "description": "统计字段。支持统计的字段:node_id、sql_type、db_name、collection、user、client。默认使用node_id统计。",
            "enum": [
              "node_id",
              "sql_type",
              "db_name",
              "collection",
              "user",
              "client"
            ]
          },
          "offset": {
            "type": "integer",
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "minimum": 0,
            "maximum": 200
          },
          "limit": {
            "type": "integer",
            "description": "每页记录数,默认为20,最大取值100。",
            "minimum": 1,
            "maximum": 100
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ListInnodbLocks",
      "description": "查询InnoDB锁等待列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportSqlStatements",
      "description": "全量SQL开关打开后,一次性导出指定时间范围内的全量SQL数据,支持分页滚动获取。该功能仅支持付费实例。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型。支持MySQL和GaussDB(for MySQL)。",
            "type": "string",
            "in": "query"
          },
          "marker": {
            "description": "指定一个标识符。获取第一页时不用赋值,获取下一页时取上页查询结果的返回值。",
            "type": "string",
            "in": "query"
          },
          "limit": {
            "description": "每页记录数。最大为2000。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "limit",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ShowTransactionSwitchStatus",
      "description": "查询历史事务开关。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型。仅支持MySQL",
            "type": "string",
            "enum": [
              "MySQL"
            ],
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateShareConnections",
      "description": "设置共享链接,",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "shared_conn_id": {
            "type": "string",
            "description": "共享连接ID"
          },
          "expired_time": {
            "type": "string",
            "description": "过期时间",
            "example": "2023-05-10T11:36:00.200Z"
          },
          "users": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "user_id": {
                  "type": "string",
                  "description": "用户ID"
                },
                "user_name": {
                  "type": "string",
                  "description": "用户名"
                }
              },
              "required": [
                "user_id",
                "user_name"
              ]
            },
            "description": "用户"
          }
        },
        "required": [
          "project_id",
          "shared_conn_id",
          "users"
        ]
      }
    },
    {
      "name": "ListTopSlowLog",
      "description": "查询TOP慢SQL列表",
      "inputSchema": {
        "type": "object",
        "properties": {
          "end_at": {
            "description": "结束时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "num": {
            "description": "TOP数量",
            "type": "integer",
            "format": "int32",
            "maximum": 30,
            "minimum": 1,
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "end_at",
          "num",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "DeleteProcess",
      "description": "查杀会话。支持按照用户、数据库、会话列表查杀会话,三个条件至少指定一个。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "db_user_id": {
            "type": "string",
            "description": "数据库用户ID"
          },
          "process_ids": {
            "type": "array",
            "description": "会话ID列表。process_ids、user、database至少指定一个参数。",
            "items": {
              "type": "string"
            }
          },
          "user": {
            "type": "string",
            "description": "用户"
          },
          "database": {
            "type": "string",
            "description": "数据库名称"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "RegisterDbUser",
      "description": "此接口是将数据库用户和密码注册进DAS系统,同时会返回一个数据库用户ID ,后续调用其他接口时(如查询实例会话列表接口)需要用到此数据库用户ID。密码为加密存储,且仅用于DAS API相关功能。此接口不会在数据库实例上创建数据库用户对象。请确保输入的用户名和密码是已经存在并且是正确的。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "db_username": {
            "type": "string",
            "description": "数据库用户名称"
          },
          "db_user_password": {
            "type": "string",
            "description": "数据库用户密码"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型,取值为MySQL"
          }
        },
        "required": [
          "datastore_type",
          "db_user_password",
          "db_username",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportSlowQueryLogs",
      "description": "DAS收集慢SQL开关打开后,一次性导出指定时间范围内的慢SQL数据,支持分页滚动获取。免费实例仅支持查看最近一小时数据。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "marker": {
            "description": "指定一个标识符。获取第一页时不用赋值,获取下一页时取上页查询结果的返回值。",
            "type": "string",
            "in": "query"
          },
          "limit": {
            "description": "每页记录数。最大为2000。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。支持MySQL、GaussDB(for MySQL)、PostgreSQL。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "limit",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ShowDbUser",
      "description": "查询注册在DAS里的数据库用户信息。此接口不能查询数据库实例上的数据库用户对象。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "path"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListSpaceAnalysis",
      "description": "获取空间分析数据列表。实例级别数据来源于文件系统,库级别和表级别数据来源于information_schema.tables表。空间&元数据分析最多分析10000张表,若缺少库表空间数据,可能是因为数据库实例表个数过多或者账号未保存密码。如果为保存密码,请使用用户管理接口或页面录入数据库账号。 支持MySQL、GaussDB(for MySQL)和SQLServer引擎。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "引擎类型",
            "type": "string",
            "enum": [
              "MySQL",
              "GaussDB(for MySQL)",
              "SQLServer"
            ],
            "in": "query"
          },
          "show_instance_info": {
            "description": "是否返回实例级别数据,取值:true或者false",
            "type": "string",
            "default": "true",
            "in": "query"
          },
          "limit": {
            "description": "查询记录数。默认为100,不能为负数,最小值为1,最大值为100。",
            "type": "string",
            "default": "100",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。offset必须是limit的整数倍。",
            "type": "string",
            "default": "0",
            "in": "query"
          },
          "database_id": {
            "description": "数据库ID",
            "type": "string",
            "in": "query"
          },
          "object_type": {
            "description": "对象类型",
            "type": "string",
            "default": "database",
            "enum": [
              "database",
              "table"
            ],
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "object_type",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportSlowSqlTrendDetails",
      "description": "慢SQL开关打开后,导出慢SQL数量趋势。免费实例仅支持查看最近一小时数据。查询时间间隔最长一天。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为20,最大取值100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "node_id": {
            "description": "节点ID。",
            "type": "string",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。支持MySQL和GaussDB(for MySQL)。",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ParseSqlLimitRules",
      "description": "根据原始SQL生成SQL限流关键字,目前支持MySQL、MariaDB、GaussDB(for MySQL)三种引擎。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型,目前支持MySQL、MariaDB、GaussDB(for MySQL)三种引擎。",
            "enum": [
              "MySQL",
              "MariaDB",
              "GaussDB(for MySQL)"
            ]
          },
          "original_sql": {
            "type": "string",
            "description": "原始SQL语句",
            "maxLength": 1024
          },
          "use_template": {
            "type": "boolean",
            "description": "是否校验SQL语句"
          },
          "keep_operators": {
            "type": "boolean",
            "description": "是否保留操作符"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "keep_operators",
          "original_sql",
          "project_id",
          "use_template"
        ]
      }
    },
    {
      "name": "ListInstanceMultiNodesSingleMetric",
      "description": "获取多节点单指标数据",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "metric_name": {
            "type": "string",
            "example": "mem_usage",
            "description": "指标名称"
          },
          "start_at": {
            "type": "integer",
            "format": "int64",
            "example": 1736402167049,
            "description": "开始时间"
          },
          "end_at": {
            "type": "integer",
            "format": "int64",
            "example": 1736403967049,
            "description": "结束时间"
          },
          "instance_infos": {
            "type": "array",
            "items": {
              "required": [
                "datastore_type",
                "node_infos"
              ],
              "properties": {
                "datastore_type": {
                  "type": "string",
                  "example": "mysql",
                  "description": "数据库类型"
                },
                "node_infos": {
                  "type": "array",
                  "items": {
                    "required": [
                      "instance_id",
                      "node_ids"
                    ],
                    "properties": {
                      "instance_id": {
                        "type": "string",
                        "example": "5c59fa7d6f09456b947f32922f9aeda1in01",
                        "description": "实例ID"
                      },
                      "node_ids": {
                        "type": "array",
                        "items": {
                          "type": "string"
                        },
                        "example": [
                          "09ab88b8a12340569ac056af284011d9no01"
                        ],
                        "description": "节点ID列表"
                      }
                    }
                  },
                  "description": "节点列表"
                }
              }
            },
            "description": "实例信息列表"
          }
        },
        "required": [
          "end_at",
          "instance_infos",
          "metric_name",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ListMetadataLocks",
      "description": "查询元数据锁列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "table": {
            "description": "表名",
            "type": "string",
            "in": "query"
          },
          "database": {
            "description": "数据库名称",
            "type": "string",
            "in": "query"
          },
          "thread_id": {
            "description": "会话ID",
            "type": "string",
            "in": "query"
          },
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "db_user_id",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListRiskTrend",
      "description": "查询资源风险实例风险趋势",
      "inputSchema": {
        "type": "object",
        "properties": {
          "metric_code": {
            "description": "指标码",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "metric_code",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "UpdateDbUser",
      "description": "修改注册在DAS里的数据库用户名和密码。此接口不会修改数据库实例上的数据库用户对象的用户名和密码。请确保输入的用户名和密码是已经存在并且是正确的。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "db_user_id": {
            "description": "数据库用户ID。用户使用数据库账号与数据库建立的连接ID(数据库用户ID由注册数据库用户接口创建)。",
            "type": "string",
            "in": "path"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "db_username": {
            "type": "string",
            "description": "数据库用户名称"
          },
          "db_user_password": {
            "type": "string",
            "description": "数据库用户密码"
          }
        },
        "required": [
          "db_user_id",
          "db_user_password",
          "db_username",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListHealthReportTask",
      "description": "查询实例健康诊断报告列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为10,最大取值200。",
            "type": "integer",
            "format": "int32",
            "maximum": 200,
            "minimum": 0,
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "maximum": 5000,
            "minimum": 0,
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          }
        },
        "required": [
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ShowSqlLimitJobInfo",
      "description": "查询指定ID的SQL限流任务信息",
      "inputSchema": {
        "type": "object",
        "properties": {
          "job_id": {
            "description": "SQL限流任务ID",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "job_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ExportTopRiskInstances",
      "description": "导出TOP风险实例列表,支持查看最近24小时数据。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "metric_code": {
            "description": "指标码",
            "type": "string",
            "in": "query"
          },
          "num": {
            "description": "返回TOP风险实例数量。",
            "type": "integer",
            "enum": [
              10,
              20,
              30
            ],
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "AddFullSqlTask",
      "description": "创建全量SQL明细解析任务",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "example": "mysql",
            "description": "数据库引擎"
          },
          "node_id": {
            "type": "string",
            "example": "09ab88b8a12340569ac056af284011d9no01",
            "description": "节点ID,有值时创建节点维度任务"
          },
          "start_at": {
            "type": "integer",
            "format": "int64",
            "example": 1742815900000,
            "description": "开始时间(Unix timestamp),单位:毫秒"
          },
          "end_at": {
            "type": "integer",
            "format": "int64",
            "example": 1742819500000,
            "description": "结束时间(Unix timestamp),单位:毫秒"
          },
          "user_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "a"
            ],
            "description": "用户名列表,最大长度20"
          },
          "keyword_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "b"
            ],
            "description": "关键字列表,最大长度20"
          },
          "db_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "c",
              "sdfssdff"
            ],
            "description": "数据库列表,最大长度20"
          },
          "operation_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "SELECT"
            ],
            "description": "操作类型列表,最大长度20"
          },
          "thread_id_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "1"
            ],
            "description": "线程id列表,最大长度20"
          },
          "status_list": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "example": [
              "0"
            ],
            "description": "执行状态列表,\"0\"为成功,\"1\"为失败,最大长度20"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ListInstanceDistribution",
      "description": "查询实例分布情况",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ShowInstanceHealthReport",
      "description": "获取实例健康诊断报告内容。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "description": "任务ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "project_id",
          "task_id"
        ]
      }
    },
    {
      "name": "ShowSqlLimitSwitchStatus",
      "description": "查询SQL限流的开关状态。目前仅支持MySQL实例",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "enum": [
              "MySQL",
              "PostgreSQL"
            ],
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListApiVersions",
      "description": "查询API版本列表",
      "inputSchema": {
        "type": "object",
        "properties": {}
      }
    },
    {
      "name": "ListTransactions",
      "description": "查询历史事务列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "last_sec_max": {
            "description": "持续时间上限",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "last_sec_min": {
            "description": "持续时间下限",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "order_by": {
            "description": "升序|降序",
            "type": "string",
            "default": "desc",
            "enum": [
              "asc",
              "desc"
            ],
            "in": "query"
          },
          "order": {
            "description": "排序字段",
            "type": "string",
            "default": "collectTime",
            "enum": [
              "occurrenceTime",
              "lastSec",
              "waitLockStructCount",
              "holdLockStructCount",
              "collectTime"
            ],
            "in": "query"
          },
          "page_size": {
            "description": "页大小",
            "type": "integer",
            "format": "int32",
            "default": 10,
            "in": "query"
          },
          "page_num": {
            "description": "页数",
            "type": "integer",
            "format": "int32",
            "default": 1,
            "in": "query"
          },
          "end_at": {
            "description": "采集结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "采集开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。仅支持MySQL",
            "type": "string",
            "enum": [
              "MySQL"
            ],
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ChangeSqlLimitSwitchStatus",
      "description": "设置SQL限流开关状态。目前仅支持MySQL数据库。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "switch_status": {
            "type": "string",
            "description": "开关状态",
            "enum": [
              "ON",
              "OFF"
            ]
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型",
            "enum": [
              "MySQL",
              "PostgreSQL"
            ]
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "switch_status"
        ]
      }
    },
    {
      "name": "UpdateSqlLimitRules",
      "description": "修改SQL限流规则。目前仅支持PostgreSQL数据库",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "datastore_type": {
            "type": "string",
            "description": "数据库类型",
            "enum": [
              "PostgreSQL"
            ]
          },
          "sql_limit_rule_ids": {
            "type": "array",
            "items": {
              "type": "string"
            },
            "description": "SQL限流规则ID"
          },
          "database_name": {
            "type": "string",
            "description": "数据库名(PostgreSQL必填)"
          },
          "sql_limit_rule": {
            "type": "object",
            "required": [
              "max_concurrency"
            ],
            "properties": {
              "max_concurrency": {
                "type": "integer",
                "format": "int32",
                "description": "最大并发数"
              },
              "max_waiting": {
                "type": "integer",
                "format": "int32",
                "description": "最大等待时间"
              }
            },
            "description": "需要修改的SQL限流规则"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id",
          "sql_limit_rule",
          "sql_limit_rule_ids"
        ]
      }
    },
    {
      "name": "ListInstanceNodesInfo",
      "description": "获取单个实例节点信息",
      "inputSchema": {
        "type": "object",
        "properties": {
          "datastore_type": {
            "description": "数据库类型",
            "type": "string",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID",
            "type": "string",
            "in": "query"
          },
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateHealthReportTask",
      "description": "创建实例健康诊断任务。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          },
          "start_at": {
            "type": "integer",
            "format": "int64",
            "description": "开始时间(Unix timestamp),单位:毫秒。"
          },
          "end_at": {
            "type": "integer",
            "format": "int64",
            "description": "结束时间(Unix timestamp),单位:毫秒。"
          }
        },
        "required": [
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ListConnections",
      "description": "查询实例连接列表",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "query"
          },
          "connection_type": {
            "description": "连接类型,NORMAL-创建的连接,SHARE-他人共享给我的连接。",
            "type": "string",
            "enum": [
              "NORMAL",
              "SHARE"
            ],
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库引擎。",
            "type": "string",
            "in": "query"
          },
          "network_type": {
            "description": "数据库来源",
            "type": "string",
            "enum": [
              "gaussdb",
              "dds",
              "rds",
              "ecs",
              "gemini",
              "ddm"
            ],
            "in": "query"
          },
          "limit": {
            "description": "查询记录数。默认为100,不能为负数,最小值为1,最大值为200。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "condition": {
            "description": "数据库实例地址/实例名称/备注等关键字",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "query"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "maxLength": 1024,
            "minLength": 1,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ShowMetricNamesSupport",
      "description": "多节点单指标支持指标信息",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ExportTopSqlTemplatesDetails",
      "description": "TopSQL开关打开后,导出TopSQL模板列表。该功能仅支持付费实例。查询时间间隔最长一小时。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为20,最大取值100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "asc": {
            "description": "排序顺序(true:正序, false:逆序)。",
            "type": "boolean",
            "default": false,
            "in": "query"
          },
          "sort": {
            "description": "排序字段(executeNum:执行次数, totalCost:总耗时, avgCost:平均耗时, totalScan: 总扫描行数, avgScan:平均扫描行数)。",
            "type": "string",
            "default": "avgCost",
            "enum": [
              "executeNum",
              "totalCost",
              "avgCost",
              "totalScan",
              "avgScan"
            ],
            "in": "query"
          },
          "node_id": {
            "description": "节点ID。",
            "type": "string",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。支持MySQL和GaussDB(for MySQL)。",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    },
    {
      "name": "ExportSlowSqlTemplatesDetails",
      "description": "慢SQL开关打开后,导出慢SQL模板列表。免费实例仅支持查看最近一小时数据。查询时间间隔最长一天。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "每页记录数,默认为20,最大取值100。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "偏移量。从第一条数据偏移offset条数据后开始查询,默认为0(偏移0条数据,表示从第一条数据开始查询),必须为数字,不能为负数。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "db_name": {
            "description": "数据库名称。",
            "type": "string",
            "in": "query"
          },
          "datastore_type": {
            "description": "数据库类型。支持MySQL和GaussDB(for MySQL)。",
            "type": "string",
            "in": "query"
          },
          "end_at": {
            "description": "结束时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "start_at": {
            "description": "开始时间(Unix timestamp),单位:毫秒。",
            "type": "integer",
            "format": "int64",
            "in": "query"
          },
          "instance_id": {
            "description": "实例ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目ID。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "datastore_type",
          "end_at",
          "instance_id",
          "project_id",
          "start_at"
        ]
      }
    }
  ]
}
