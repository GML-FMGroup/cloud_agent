{
  "server": "mcp_server_kps",
  "mode": "openapi",
  "module": "huaweicloud_services_server.mcp_server_kps.src.mcp_server_kps.run",
  "serviceCode": "kps",
  "openapiFile": "../../../scripts/huawei/mcp-server/huaweicloud_services_server/mcp_server_kps/src/mcp_server_kps/config/kps.json",
  "toolCount": 18,
  "tools": [
    {
      "name": "CreateKeypair",
      "description": "创建和导入SSH密钥对",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "keypair": {
            "required": [
              "name"
            ],
            "description": "创建密钥对请求体请求参数",
            "properties": {
              "name": {
                "type": "string",
                "description": "SSH密钥对的名称。",
                "pattern": "^[A-Za-z0-9_-]{1,255}$"
              },
              "type": {
                "type": "string",
                "description": "SSH密钥对的类型。ssh或x509。",
                "enum": [
                  "ssh",
                  "x509"
                ]
              },
              "public_key": {
                "type": "string",
                "description": "导入公钥的字符串信息。",
                "minLength": 0,
                "maxLength": 1024
              },
              "scope": {
                "type": "string",
                "description": "租户级或者用户级。domain或user。",
                "enum": [
                  "domain",
                  "user"
                ]
              },
              "user_id": {
                "type": "string",
                "description": "SSH密钥对所属的用户信息",
                "pattern": "^[0-9a-zA-Z]{1,64}$"
              },
              "key_protection": {
                "description": "SSH密钥对私钥托管与保护。",
                "properties": {
                  "private_key": {
                    "type": "string",
                    "description": "导入SSH密钥对的私钥。",
                    "minLength": 0,
                    "maxLength": 65535
                  },
                  "encryption": {
                    "description": "对私钥进行加密存储的方式。",
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "取值范围:“kms”或“default”。",
                        "enum": [
                          "default",
                          "kms"
                        ]
                      },
                      "kms_key_name": {
                        "type": "string",
                        "description": "kms密钥的名称。",
                        "minLength": 0,
                        "maxLength": 255
                      },
                      "kms_key_id": {
                        "type": "string",
                        "description": "kms密钥的ID。",
                        "pattern": "^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$",
                        "minLength": 36,
                        "maxLength": 36
                      }
                    },
                    "type": "object",
                    "required": [
                      "type"
                    ]
                  }
                },
                "type": "object",
                "required": [
                  "encryption"
                ]
              }
            },
            "type": "object"
          }
        },
        "required": [
          "keypair",
          "project_id"
        ]
      }
    },
    {
      "name": "ListFailedTask",
      "description": "查询绑定、解绑等操作失败的任务信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "offset": {
            "description": "失败的任务信息列表的偏移量",
            "type": "integer",
            "format": "int32",
            "default": 0,
            "maximum": 100000,
            "minimum": 0,
            "in": "query"
          },
          "limit": {
            "example": "1000",
            "description": "每页显示的条目数量。默认值1000。",
            "type": "integer",
            "maximum": 1000,
            "minimum": 1,
            "in": "query"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ClearPrivateKey",
      "description": "清除SSH密钥对私钥。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "keypair_name": {
            "example": "keyalias",
            "description": "密钥对名称。",
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID。",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "keypair_name",
          "project_id"
        ]
      }
    },
    {
      "name": "DeleteFailedTask",
      "description": "删除失败的任务。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "example": "1f48bb43-1730-4f09-9457-f18faae68c24",
            "description": "任务ID",
            "type": "string",
            "maxLength": 36,
            "minLength": 36,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id",
          "task_id"
        ]
      }
    },
    {
      "name": "ExportPrivateKey",
      "description": "导出指定密钥对的私钥。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "keypair": {
            "type": "object",
            "properties": {
              "name": {
                "type": "string",
                "description": "SSH密钥对名称。",
                "pattern": "^[A-Za-z0-9_-]{1,255}$"
              }
            },
            "required": [
              "name"
            ]
          }
        },
        "required": [
          "keypair",
          "project_id"
        ]
      }
    },
    {
      "name": "AssociateKeypair",
      "description": "给指定的虚拟机绑定(替换或重置,替换需提供虚拟机已配置的SSH密钥对私钥;重置不需要提供虚拟机的SSH密钥对私钥)新的SSH密钥对。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "keypair_name": {
            "type": "string",
            "description": "SSH密钥对的名称",
            "pattern": "^[A-Za-z0-9_-]{1,255}$"
          },
          "server": {
            "required": [
              "id"
            ],
            "description": "需要绑定密钥对的虚拟机信息。",
            "properties": {
              "id": {
                "type": "string",
                "description": "需要绑定(替换或重置)SSH密钥对的虚拟机id",
                "minLength": 0,
                "maxLength": 64
              },
              "auth": {
                "description": "可选字段,鉴权认证类型。替换时需要该参数,重置时不需要该参数。",
                "properties": {
                  "type": {
                    "type": "string",
                    "description": "取值为枚举类型。password或keypair。",
                    "enum": [
                      "password",
                      "keypair"
                    ]
                  },
                  "key": {
                    "type": "string",
                    "description": "- type为枚举值password时,key表示密码;",
                    "minLength": 0,
                    "maxLength": 65535
                  }
                },
                "type": "object"
              },
              "disable_password": {
                "type": "boolean",
                "description": "- true:禁用虚拟机的ssh登录。"
              },
              "port": {
                "type": "integer",
                "format": "int64",
                "description": "SSH监听端口。",
                "example": 22,
                "minimum": 1,
                "maximum": 65535
              }
            },
            "type": "object"
          }
        },
        "required": [
          "keypair_name",
          "project_id",
          "server"
        ]
      }
    },
    {
      "name": "BatchAssociateKeypair",
      "description": "给指定的虚拟机批量绑定新的SSH密钥对。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "batch_keypairs": {
            "type": "array",
            "items": {
              "required": [
                "keypair_name",
                "server"
              ],
              "description": "绑定密钥对请求体。",
              "properties": {
                "keypair_name": {
                  "type": "string",
                  "description": "SSH密钥对的名称",
                  "pattern": "^[A-Za-z0-9_-]{1,255}$"
                },
                "server": {
                  "required": [
                    "id"
                  ],
                  "description": "需要绑定密钥对的虚拟机信息。",
                  "properties": {
                    "id": {
                      "type": "string",
                      "description": "需要绑定(替换或重置)SSH密钥对的虚拟机id",
                      "minLength": 0,
                      "maxLength": 64
                    },
                    "auth": {
                      "description": "可选字段,鉴权认证类型。替换时需要该参数,重置时不需要该参数。",
                      "properties": {
                        "type": {
                          "type": "string",
                          "description": "取值为枚举类型。password或keypair。",
                          "enum": [
                            "password",
                            "keypair"
                          ]
                        },
                        "key": {
                          "type": "string",
                          "description": "- type为枚举值password时,key表示密码;",
                          "minLength": 0,
                          "maxLength": 65535
                        }
                      },
                      "type": "object"
                    },
                    "disable_password": {
                      "type": "boolean",
                      "description": "- true:禁用虚拟机的ssh登录。"
                    },
                    "port": {
                      "type": "integer",
                      "format": "int64",
                      "description": "SSH监听端口。",
                      "example": 22,
                      "minimum": 1,
                      "maximum": 65535
                    }
                  },
                  "type": "object"
                }
              },
              "type": "object"
            },
            "description": "最多可同时选择10个弹性云服务器绑定密钥对。",
            "minItems": 0,
            "maxItems": 10
          }
        },
        "required": [
          "batch_keypairs",
          "project_id"
        ]
      }
    },
    {
      "name": "UpdateKeypairDescription",
      "description": "更新SSH密钥对描述。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "keypair_name": {
            "example": "keyalias",
            "description": "密钥对名称",
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "keypair": {
            "required": [
              "description"
            ],
            "description": "更新SSH密钥对描述消息体",
            "properties": {
              "description": {
                "type": "string",
                "description": "描述信息",
                "minLength": 0,
                "maxLength": 255
              }
            },
            "type": "object"
          }
        },
        "required": [
          "keypair",
          "keypair_name",
          "project_id"
        ]
      }
    },
    {
      "name": "ListKeypairTask",
      "description": "根据SSH密钥对接口返回的task_id,查询SSH密钥对当前任务的执行状态。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "task_id": {
            "example": "1f48bb43-1730-4f09-9457-f18faae68c24",
            "description": "任务ID",
            "type": "string",
            "maxLength": 36,
            "minLength": 36,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id",
          "task_id"
        ]
      }
    },
    {
      "name": "ImportPrivateKey",
      "description": "导入私钥到指定密钥对。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "keypair": {
            "type": "object",
            "required": [
              "name",
              "key_protection"
            ],
            "properties": {
              "name": {
                "type": "string",
                "description": "SSH密钥对的名称。 - 新创建的密钥对名称不能和已有密钥对的名称相同。 - SSH密钥对名称由英文字母、数字、下划线、中划线组成,长度不能超过64个字节",
                "pattern": "^[A-Za-z0-9_-]{1,255}$"
              },
              "user_id": {
                "type": "string",
                "description": "SSH密钥对所属的用户信息",
                "pattern": "^[0-9a-zA-Z]{1,64}$"
              },
              "key_protection": {
                "description": "SSH密钥对私钥托管与保护。",
                "properties": {
                  "private_key": {
                    "type": "string",
                    "description": "导入SSH密钥对的私钥。",
                    "minLength": 0,
                    "maxLength": 65535
                  },
                  "encryption": {
                    "description": "对私钥进行加密存储的方式。",
                    "properties": {
                      "type": {
                        "type": "string",
                        "description": "取值范围:“kms”或“default”。",
                        "enum": [
                          "default",
                          "kms"
                        ]
                      },
                      "kms_key_name": {
                        "type": "string",
                        "description": "kms密钥的名称。",
                        "minLength": 0,
                        "maxLength": 255
                      },
                      "kms_key_id": {
                        "type": "string",
                        "description": "kms密钥的ID。",
                        "pattern": "^[0-9a-z]{8}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{4}-[0-9a-z]{12}$",
                        "minLength": 36,
                        "maxLength": 36
                      }
                    },
                    "type": "object",
                    "required": [
                      "type"
                    ]
                  }
                },
                "type": "object",
                "required": [
                  "private_key",
                  "encryption"
                ]
              }
            }
          }
        },
        "required": [
          "keypair",
          "project_id"
        ]
      }
    },
    {
      "name": "BatchImportKeypair",
      "description": "批量导入SSH密钥对,单次批量导入不得超过10条记录。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID。",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "DeleteKeypair",
      "description": "删除SSH密钥对。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "keypair_name": {
            "example": "keyalias",
            "description": "密钥对名称",
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "keypair_name",
          "project_id"
        ]
      }
    },
    {
      "name": "DisassociateKeypair",
      "description": "给指定的虚拟机解除绑定SSH密钥对并恢复SSH密码登录。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          },
          "server": {
            "required": [
              "id"
            ],
            "description": "需要绑定密钥对的虚拟机信息。",
            "properties": {
              "id": {
                "type": "string",
                "description": "需要绑定(替换或重置)SSH密钥对的虚拟机id",
                "minLength": 0,
                "maxLength": 64
              },
              "auth": {
                "description": "可选字段,鉴权认证类型。替换时需要该参数,重置时不需要该参数。",
                "properties": {
                  "type": {
                    "type": "string",
                    "description": "取值为枚举类型。password或keypair。",
                    "enum": [
                      "password",
                      "keypair"
                    ]
                  },
                  "key": {
                    "type": "string",
                    "description": "- type为枚举值password时,key表示密码;",
                    "minLength": 0,
                    "maxLength": 65535
                  }
                },
                "type": "object"
              }
            },
            "type": "object"
          }
        },
        "required": [
          "project_id",
          "server"
        ]
      }
    },
    {
      "name": "ListKeypairs",
      "description": "查询SSH密钥对列表",
      "inputSchema": {
        "type": "object",
        "properties": {
          "marker": {
            "example": "keypair-0307",
            "description": "分页查询起始的资源id,为空时为查询第一页",
            "type": "string",
            "pattern": "^[A-Za-z0-9_-]{1,255}$",
            "in": "query"
          },
          "limit": {
            "example": "50",
            "description": "每页返回的个数。",
            "type": "string",
            "maxLength": 4,
            "minLength": 1,
            "in": "query"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "BatchExportPrivateKey",
      "description": "批量导出密钥对私钥,单次最多导出10条数据",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID。",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ListKeypairDetail",
      "description": "查询SSH密钥对详细信息",
      "inputSchema": {
        "type": "object",
        "properties": {
          "keypair_name": {
            "example": "keyalias",
            "description": "密钥对名称",
            "type": "string",
            "maxLength": 255,
            "minLength": 1,
            "in": "path"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "keypair_name",
          "project_id"
        ]
      }
    },
    {
      "name": "DeleteAllFailedTask",
      "description": "删除操作失败的任务信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ListRunningTask",
      "description": "查询正在处理的任务信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "offset": {
            "description": "首个展示的正在处理任务信息的偏移量",
            "type": "integer",
            "format": "int32",
            "default": 0,
            "maximum": 100000,
            "minimum": 0,
            "in": "query"
          },
          "limit": {
            "example": "10",
            "description": "每页显示的条目数量。默认值1000。",
            "type": "integer",
            "maximum": 1000,
            "minimum": 1,
            "in": "query"
          },
          "project_id": {
            "example": "2b31ed520xxxxxxebedb6e57xxxxxxxx",
            "description": "项目ID",
            "type": "string",
            "maxLength": 64,
            "minLength": 32,
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    }
  ]
}
