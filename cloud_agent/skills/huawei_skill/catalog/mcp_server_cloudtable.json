{
  "server": "mcp_server_cloudtable",
  "mode": "openapi",
  "module": "huaweicloud_services_server.mcp_server_cloudtable.src.mcp_server_cloudtable.run",
  "serviceCode": "cloudtable",
  "openapiFile": "../../../scripts/huawei/mcp-server/huaweicloud_services_server/mcp_server_cloudtable/src/mcp_server_cloudtable/config/cloudtable.json",
  "toolCount": 10,
  "tools": [
    {
      "name": "ShowClusterDetail",
      "description": "通过集群ID唯一标识一个集群,根据集群ID查询特定CloudTable集群的详情信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "集群ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-cloudtable/cloudtable_api_0013.html)。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "cluster_id",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateCluster",
      "description": "创建一个CloudTable集群。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-cloudtable/cloudtable_api_0013.html)。",
            "type": "string",
            "in": "path"
          },
          "cluster": {
            "properties": {
              "auth_mode": {
                "type": "string",
                "description": "是否开启IAM权限认证。"
              },
              "enable_lemon": {
                "type": "boolean",
                "description": "是否开启Lemon(目前已关闭该参数,填false即可)"
              },
              "enable_openTSDB": {
                "type": "boolean",
                "description": "是否开启OpenTSDB。"
              },
              "instance": {
                "properties": {
                  "availability_zone": {
                    "type": "string",
                    "example": "kvmxen.dc1",
                    "description": "集群所在可用区的ID。"
                  },
                  "cu_num": {
                    "type": "integer",
                    "format": "int32",
                    "example": 2,
                    "description": "CloudTable集群计算单元节点数目,至少为2。"
                  },
                  "lemon_num": {
                    "type": "integer",
                    "format": "int32",
                    "example": 0,
                    "description": "CloudTable集群Lemon节点数目。"
                  },
                  "nics": {
                    "type": "array",
                    "example": [
                      {
                        "net_id": "8e8b7b75-5e55-4948-907e-79d06e18c516",
                        "security_group_id": "57c6e2a1-857c-4504-92b2-24e95bd587cc"
                      }
                    ],
                    "description": "集群所在网络信息。",
                    "items": {
                      "type": "object",
                      "required": [
                        "net_id",
                        "security_group_id"
                      ],
                      "properties": {
                        "net_id": {
                          "type": "string",
                          "example": "47a5bb30-450a-4300-8949-f1e1b049305c",
                          "description": "子网ID"
                        },
                        "security_group_id": {
                          "type": "string",
                          "example": "0151bc62-4016-46af-af5e-cab8d9e66382",
                          "description": "安全组ID"
                        }
                      }
                    }
                  },
                  "tsd_num": {
                    "type": "integer",
                    "format": "int32",
                    "example": 0,
                    "description": "CloudTable集群TSD节点数目,至少为2。"
                  }
                },
                "description": "集群的实例对象。",
                "required": [
                  "availability_zone",
                  "cu_num",
                  "nics",
                  "tsd_num"
                ],
                "type": "object"
              },
              "name": {
                "type": "string",
                "example": "cloudtable-interfacetest1",
                "description": "CloudTable集群的名称。"
              },
              "storage_size": {
                "type": "integer",
                "format": "int32",
                "example": 800,
                "description": "存储值的大小。"
              },
              "storage_type": {
                "type": "string",
                "example": "ULTRAHIGH",
                "description": "存储类型:"
              },
              "vpc_id": {
                "type": "string",
                "example": "23af42c2-f57f-499f-8a2f-a934bd05b8b3",
                "description": "集群所在的(虚拟网络私有云)VPC。"
              },
              "datastore": {
                "properties": {
                  "version": {
                    "type": "string",
                    "example": "1.0.6",
                    "description": "controller版本号,默认1.0.6"
                  },
                  "type": {
                    "type": "string",
                    "example": "hbase",
                    "description": "集群数据库类型"
                  }
                },
                "description": "创建集群数据库参数。",
                "required": [
                  "version",
                  "type"
                ],
                "type": "object"
              }
            },
            "description": "创建集群参数对象实体。",
            "required": [
              "instance",
              "name",
              "storage_type",
              "vpc_id",
              "datastore"
            ],
            "type": "object"
          }
        },
        "required": [
          "cluster",
          "project_id"
        ]
      }
    },
    {
      "name": "RebootCloudTableCluster",
      "description": "重启集群的api入口",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "集群ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          },
          "restart": {
            "description": "该请求参数内无其他内容,但是需要该参数作为重启集群入参,示例看下述所示",
            "type": "object"
          }
        },
        "required": [
          "cluster_id",
          "project_id",
          "restart"
        ]
      }
    },
    {
      "name": "DeleteCluster",
      "description": "集群ID为集群唯一标识,根据集群ID删除指定集群。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "集群ID。",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-cloudtable/cloudtable_api_0013.html)。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "cluster_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListClusters",
      "description": "查看用户创建的集群列表信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "limit": {
            "description": "分页参数,列表当前分页的数量限制,默认为10。",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "offset": {
            "description": "分页参数,列表的偏移量,默认值为0",
            "type": "integer",
            "format": "int32",
            "in": "query"
          },
          "project_id": {
            "description": "项目编号。获取方法,请参见[获取项目ID](https://support.huaweicloud.com/api-cloudtable/cloudtable_api_0013.html)。",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "UpdateClusterSetting",
      "description": "修改集群配置",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "集群ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          },
          "is_reboot": {
            "type": "string",
            "description": "是否重启"
          },
          "hbase_modify_settings": {
            "type": "array",
            "items": {
              "type": "object",
              "properties": {
                "parm_name": {
                  "type": "string",
                  "description": "待修改的参数名"
                },
                "new_value": {
                  "type": "string",
                  "description": "设置的参数值"
                },
                "id": {
                  "type": "string",
                  "description": "参数ID,可不传"
                }
              },
              "required": [
                "parm_name",
                "new_value"
              ]
            },
            "description": "参见HBaseModifySettingV2结构说明"
          }
        },
        "required": [
          "cluster_id",
          "hbase_modify_settings",
          "is_reboot",
          "project_id"
        ]
      }
    },
    {
      "name": "ExpandClusterComponent",
      "description": "扩容指定类型的集群节点",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "集群ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          },
          "component_name": {
            "type": "string",
            "description": "扩容节点类型:rs,tsdb,lemon"
          },
          "node_num": {
            "type": "integer",
            "format": "int32",
            "description": "扩容节点范围是 [2,10]"
          }
        },
        "required": [
          "cluster_id",
          "component_name",
          "node_num",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateCloudTableCluster",
      "description": "创建一个CloudTable集群。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          },
          "cluster_name": {
            "type": "string",
            "example": "cloudtable-zym-doris-202305306",
            "description": "集群名字"
          },
          "datastore": {
            "properties": {
              "version": {
                "type": "string",
                "example": "1.0.6",
                "description": "controller版本号,默认1.0.6"
              },
              "type": {
                "type": "string",
                "example": "hbase",
                "description": "集群数据库类型"
              }
            },
            "description": "集群内核引擎",
            "required": [
              "version",
              "type"
            ],
            "type": "object"
          },
          "availability_zone": {
            "type": "string",
            "example": "cn-north-7c",
            "description": "可用区"
          },
          "nics": {
            "description": "子网安全组等网络信息",
            "type": "object",
            "items": {
              "type": "object",
              "required": [
                "net_id",
                "security_group_id"
              ],
              "properties": {
                "net_id": {
                  "type": "string",
                  "example": "47a5bb30-450a-4300-8949-f1e1b049305c",
                  "description": "子网ID"
                },
                "security_group_id": {
                  "type": "string",
                  "example": "0151bc62-4016-46af-af5e-cab8d9e66382",
                  "description": "安全组ID"
                }
              }
            }
          },
          "cluster_info": {
            "description": "集群详情",
            "required": [
              "feature_map",
              "cluster_instance_info"
            ],
            "properties": {
              "feature_map": {
                "type": "object",
                "additionalProperties": {
                  "type": "string"
                },
                "description": "特性属性开关",
                "example": ""
              },
              "cluster_instance_info": {
                "type": "array",
                "items": {
                  "type": "object",
                  "required": [
                    "instance_type",
                    "instance_num"
                  ],
                  "properties": {
                    "instance_type": {
                      "type": "string",
                      "example": "",
                      "description": "集群节点类型,hbase有regionserver,hmaster,opentsdb等,doris有be,fe节点,clickhouse有server(计算节点),zookeeper"
                    },
                    "instance_num": {
                      "type": "integer",
                      "format": "int32",
                      "example": "",
                      "minimum": 1,
                      "description": "节点个数,hbase取值:2<=num<=10],偶数"
                    },
                    "flavor": {
                      "type": "string",
                      "example": "",
                      "description": "节点规格,doris集群、clickhouse集群必选"
                    },
                    "volume_type": {
                      "type": "string",
                      "example": "",
                      "description": "数据盘规格:COMMON、HIGH、ULTRAHIGH,NORMALHIGH, EXTREMEHIGH. doris集群、clickhouse集群必选"
                    },
                    "volume_size": {
                      "type": "integer",
                      "format": "int32",
                      "example": "",
                      "minimum": 1,
                      "description": "数据盘大小,doris集群、clickhouse集群必选。"
                    },
                    "flavor_type": {
                      "type": "string",
                      "description": "节点入参类型 0:flavor模式 ,1:cu模式,doris、hbase、clickhouse都是flavor模式"
                    }
                  }
                },
                "description": "集群节点信息类"
              }
            }
          },
          "enterprise_project_id": {
            "type": "string",
            "example": 0,
            "description": "企业项目ID"
          },
          "vpc_id": {
            "type": "string",
            "example": "0c950906-8caf-4c08-862a-8abe3947b3cf",
            "description": "虚拟私有云ID"
          },
          "dbuser": {
            "type": "string",
            "example": "admin",
            "description": "type为doris时,必填项,管理账号:admin"
          },
          "dbuserpwd": {
            "type": "string",
            "example": "Huawei@123",
            "description": "type为doris时,必填项,管理账号密码"
          }
        },
        "required": [
          "availability_zone",
          "cluster_info",
          "cluster_name",
          "datastore",
          "nics",
          "project_id",
          "vpc_id"
        ]
      }
    },
    {
      "name": "ShowClusterSetting",
      "description": "查询集群配置",
      "inputSchema": {
        "type": "object",
        "properties": {
          "cluster_id": {
            "description": "项目ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          }
        },
        "required": [
          "cluster_id",
          "project_id"
        ]
      }
    },
    {
      "name": "EnableComponent",
      "description": "开启opentsdb组件",
      "inputSchema": {
        "type": "object",
        "properties": {
          "component_name": {
            "description": "组件类型,取值为tsdb",
            "type": "string",
            "in": "path"
          },
          "cluster_id": {
            "description": "集群ID",
            "type": "string",
            "in": "path"
          },
          "project_id": {
            "description": "租户ID",
            "type": "string",
            "in": "path"
          },
          "node_num": {
            "type": "integer",
            "format": "int32",
            "description": "节点个数, 范围是[2,10]"
          }
        },
        "required": [
          "cluster_id",
          "component_name",
          "node_num",
          "project_id"
        ]
      }
    }
  ]
}
