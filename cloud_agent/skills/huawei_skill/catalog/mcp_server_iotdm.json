{
  "server": "mcp_server_iotdm",
  "mode": "openapi",
  "module": "huaweicloud_services_server.mcp_server_iotdm.src.mcp_server_iotdm.run",
  "serviceCode": "iotdm",
  "openapiFile": "../../../scripts/huawei/mcp-server/huaweicloud_services_server/mcp_server_iotdm/src/mcp_server_iotdm/config/iotdm.json",
  "toolCount": 9,
  "tools": [
    {
      "name": "UnbindInstanceTags",
      "description": "删除实例标签。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          },
          "tags": {
            "type": "array",
            "description": "实例标签",
            "minItems": 1,
            "maxItems": 20,
            "items": {
              "required": [
                "key"
              ],
              "properties": {
                "key": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 128,
                  "pattern": "^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$",
                  "description": "**参数说明**:标签键,标签的键可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@,首尾不能有空格字符",
                  "example": "PRO"
                },
                "value": {
                  "type": "string",
                  "minLength": 0,
                  "maxLength": 255,
                  "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$",
                  "description": "**参数说明**:标签值,可为空字符串和null,标签的值可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@",
                  "example": true
                }
              },
              "type": "object"
            }
          }
        },
        "required": [
          "instance_id",
          "project_id",
          "tags"
        ]
      }
    },
    {
      "name": "ChangeInstanceChargeMode",
      "description": "修改设备接入实例的计费模式,支持将按需计费模式修改为包年/包月计费模式。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          },
          "period_type": {
            "type": "string",
            "pattern": "(month|year)",
            "example": "year",
            "description": "**参数说明**:订购设备接入实例的周期类型(包年、包月等)。charge_mode为prePaid时生效,且为必选值。"
          },
          "period_num": {
            "type": "integer",
            "example": 1,
            "minimum": 1,
            "maximum": 9,
            "description": "**参数说明**:订购设备接入实例的周期数。charge_mode为prePaid时生效,且为必选值。"
          },
          "is_auto_renew": {
            "type": "boolean",
            "example": "true",
            "default": "false",
            "description": "**参数说明**:创建包年/包月实例时可指定,表示是否自动续订,续订的周期和原周期相同,且续订时会自动支付。"
          },
          "is_auto_pay": {
            "type": "boolean",
            "example": "true",
            "default": "false",
            "description": "**参数说明**:创建包年/包月实例时可指定,表示是否自动从客户的账户中支付,此字段不影响自动续订的支付方式。"
          }
        },
        "required": [
          "instance_id",
          "period_num",
          "period_type",
          "project_id"
        ]
      }
    },
    {
      "name": "CreateInstance",
      "description": "用户可以调用此接口创建一个设备接入实例。支持的实例规格请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ResizeInstance",
      "description": "修改设备接入实例的规格。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          },
          "flavor": {
            "type": "object",
            "title": "产品规格参数结构体",
            "description": "**参数说明**:设备接入实例的规格参数。",
            "required": [
              "type"
            ],
            "properties": {
              "type": {
                "type": "string",
                "example": "iotda.standard.s1",
                "pattern": "^[A-Za-z0-9-.]{1,64}$",
                "description": "**参数说明**:待创建设备接入实例的规格名称。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)中的规格编码。"
              },
              "size": {
                "type": "integer",
                "minimum": 1,
                "maximum": 200,
                "example": 1,
                "description": "**参数说明**:待创建设备接入标准版实例的单元数量。详情请参见[产品规格说明](https://support.huaweicloud.com/productdesc-iothub/iot_04_0014.html)。当instance_type是standard时,该参数必填。"
              }
            }
          },
          "is_auto_pay": {
            "type": "boolean",
            "example": "true",
            "default": "false",
            "description": "**参数说明**:修改包年/包月实例的规格时可指定,表示是否自动从客户的账户中支付,此字段不影响自动续订的支付方式。"
          },
          "delay": {
            "type": "boolean",
            "default": false,
            "example": "false",
            "description": "**参数说明**:是否延时变更设备实例的计费信息。约束:如需延时变更,需要先设置实例的变更时间窗。"
          }
        },
        "required": [
          "flavor",
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "ListInstances",
      "description": "用户可以调用此接口查询设备接入实例列表。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_type": {
            "example": "standard",
            "description": "**参数说明**:实例类型。",
            "type": "string",
            "pattern": "(standard|basic|enterprise|valueaddedservice)",
            "in": "query"
          },
          "name": {
            "example": "iotda_instance",
            "description": "**参数说明**:设备接入实例名称,匹配规则为模糊匹配。",
            "type": "string",
            "pattern": "^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$",
            "in": "query"
          },
          "marker": {
            "description": "上一次分页查询结果中最后一条记录的ID,在上一次分页查询时由物联网平台返回获得。分页查询时物联网平台是按marker也就是记录ID降序查询的,越新的数据记录ID也会越大。若填写marker,则本次只查询记录ID小于marker的数据记录。若不填写,则从记录ID最大也就是最新的一条数据开始查询。如果需要依次查询所有数据,则每次查询时必须填写上一次查询响应中的marker值。",
            "type": "string",
            "default": "ffffffffffffffffff",
            "pattern": "^[a-fA-F0-9]{1,20}$",
            "in": "query"
          },
          "limit": {
            "example": "500",
            "description": "**参数说明**:分页查询时每页显示的记录数。",
            "type": "integer",
            "format": "int32",
            "default": 500,
            "maximum": 500,
            "minimum": 1,
            "in": "query"
          },
          "offset": {
            "example": "0",
            "description": "**参数说明**:表示从marker后偏移offset条记录开始查询。默认为0,取值范围为0-500的整数。当offset为0时,表示从marker后第一条记录开始输出。 - 限制offset最大值是出于API性能考虑,您可以搭配marker使用该参数实现翻页,例如每页50条记录,1-11页内都可以直接使用offset跳转到指定页,但到11页后,由于offset限制为500,您需要使用第11页返回的marker作为下次查询的marker,以实现翻页到12-22页。 取值范围:0-500的整数,默认为0。",
            "type": "integer",
            "format": "int32",
            "default": 0,
            "maximum": 500,
            "minimum": 0,
            "in": "query"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          }
        },
        "required": [
          "project_id"
        ]
      }
    },
    {
      "name": "ShowInstance",
      "description": "查询设备接入实例详情。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "BindInstanceTags",
      "description": "添加实例标签。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          },
          "tags": {
            "type": "array",
            "description": "实例标签",
            "minItems": 1,
            "maxItems": 20,
            "items": {
              "required": [
                "key"
              ],
              "properties": {
                "key": {
                  "type": "string",
                  "minLength": 1,
                  "maxLength": 128,
                  "pattern": "^((?!\\s)(?!_sys_)[\\p{L}\\p{Z}\\p{N}_.:=+\\-@]*)(?<!\\s)$",
                  "description": "**参数说明**:标签键,标签的键可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@,首尾不能有空格字符",
                  "example": "PRO"
                },
                "value": {
                  "type": "string",
                  "minLength": 0,
                  "maxLength": 255,
                  "pattern": "^([\\p{L}\\p{Z}\\p{N}_.:\\/=+\\-@]*)$",
                  "description": "**参数说明**:标签值,可为空字符串和null,标签的值可用字母(包含中文)、数字、空格和以下字符:下划线(_)点(.)冒号(:)等号(=)加号(+)中划线(-)以及@",
                  "example": true
                }
              },
              "type": "object"
            }
          }
        },
        "required": [
          "instance_id",
          "project_id",
          "tags"
        ]
      }
    },
    {
      "name": "UpdateInstance",
      "description": "修改设备接入实例信息。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          },
          "name": {
            "type": "string",
            "example": "iotda_instance",
            "pattern": "^[A-Za-z0-9_\\-\\u4e00-\\u9fa5]{1,64}$",
            "description": "**参数说明**:实例名称"
          },
          "description": {
            "type": "string",
            "example": "IoTDA instance for test.",
            "pattern": "^[A-Za-z0-9_,,.。\\-\\s\\u4e00-\\u9fa5]{1,256}$",
            "description": "**参数说明**:设备接入实例的描述信息。"
          },
          "operate_window": {
            "type": "object",
            "required": [
              "start_time",
              "end_time"
            ],
            "title": "实例维护时间窗结构体",
            "description": "实例维护时间窗,用户在变更实例规格时,可以指定在该时间窗内进行变更。",
            "properties": {
              "start_time": {
                "type": "string",
                "description": "**参数说明**:变更时间窗开始时间,UTC时间,格式为:\"HH:mm\"",
                "pattern": "^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",
                "example": "18:00"
              },
              "end_time": {
                "type": "string",
                "description": "**参数说明**:变更时间窗结束时间,UTC时间,格式为:\"HH:mm\"",
                "pattern": "^(0[0-9]|1[0-9]|2[0-3]):[0-5][0-9]$",
                "example": "22:00"
              }
            }
          },
          "forwarding_info": {
            "type": "object",
            "title": "修改流转配置结构体",
            "description": "企业版实例的SNAT配置,配置开启后,企业版实例可以在公共网络中进行外部通信。",
            "required": [
              "enable_snat"
            ],
            "properties": {
              "enable_snat": {
                "type": "boolean",
                "example": "false",
                "description": "**参数说明**:是否启用SNAT配置。企业版实例开启SNAT配置后,可以在公共网络中进行外部通信。"
              }
            }
          },
          "access_info": {
            "type": "object",
            "required": [
              "access_type"
            ],
            "title": "更新实例接入信息结构体",
            "description": "设备接入实例的接入信息。用户可以使用该结构体中的信息将应用服务器和设备接入到物联网平台。",
            "properties": {
              "access_type": {
                "type": "string",
                "description": "**参数说明**:接入地址的类型,如应用接入的HTTPS协议的取值为:APP_HTTPS,设备接入的MQTT协议的取值为:DEVICE_MQTT",
                "pattern": "(APP_HTTPS|APP_AMQP|APP_MQTT|DEVICE_COAP|DEVICE_MQTT|DEVICE_HTTPS)"
              },
              "domain_name": {
                "type": "string",
                "pattern": "^([a-zA-Z0-9]+(-[a-zA-Z0-9]+)*\\.)+[a-zA-Z0-9]{0,}$",
                "description": "**参数说明**:接入域名,如果需要更新域名,则携带该字段。",
                "example": "domain"
              },
              "public_addresses_enable": {
                "type": "boolean",
                "description": "**参数说明**:是否配置公网接入地址,true,false",
                "example": true
              },
              "ip_whitelist": {
                "type": "object",
                "title": "IP白名单列表结构体",
                "required": [
                  "enable"
                ],
                "description": "IP白名单",
                "properties": {
                  "enable": {
                    "type": "boolean",
                    "example": "false",
                    "description": "**参数说明**:启用Ip白名单访问控制"
                  },
                  "allow_list": {
                    "type": "array",
                    "items": {
                      "type": "object",
                      "required": [
                        "address"
                      ],
                      "title": "IP白名单列表结构体",
                      "properties": {
                        "address": {
                          "type": "string",
                          "example": "127.0.0.1",
                          "pattern": "^(?:[0-9]{1,3}.){3}[0-9]{1,3}|(?:[0-9]{1,3}.){3}[0-9]{1,3}/[0-9]{1,3}|(?:[0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}[0-9a-fA-F]{1,4}/\\d{1,3}$",
                          "minLength": 7,
                          "maxLength": 128,
                          "description": "**参数说明**:白名单ip地址"
                        },
                        "description": {
                          "type": "string",
                          "minLength": 0,
                          "maxLength": 128,
                          "example": "description",
                          "description": "**参数说明**:描述"
                        }
                      }
                    },
                    "minItems": 0,
                    "maxItems": 15,
                    "description": "允许访问企业版实例的IP地址列表"
                  }
                }
              }
            }
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    },
    {
      "name": "DeleteInstance",
      "description": "删除设备接入实例。约束:此接口仅支持删除按需计费的实例。",
      "inputSchema": {
        "type": "object",
        "properties": {
          "instance_id": {
            "example": "df91ba92-b501-4ea4-b3e1-cd96386c936c",
            "description": "**参数说明**:实例ID。",
            "type": "string",
            "pattern": "[0-9a-f-]{1,36}",
            "in": "path"
          },
          "project_id": {
            "example": "04ed32dc1b0025b52fe3c01a27c2b0a8",
            "description": "**参数说明**:项目ID。获取方法请参见 [获取项目ID](https://support.huaweicloud.com/api-iothub/iot_06_v5_1001.html) 。",
            "type": "string",
            "pattern": "^[a-fA-F0-9]{1,32}$",
            "in": "path"
          }
        },
        "required": [
          "instance_id",
          "project_id"
        ]
      }
    }
  ]
}
